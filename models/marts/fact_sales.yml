version: 2

models:
  - name: fact_sales
    description: "A fact table that aggregates sales data, combining information from customers, credit cards, locations, products, and sales reasons."
    columns:
      - name: salesorderid
        description: "Unique identifier for each sales order."
        tests:
          - not_null
          - unique
      - name: product_fk
        description: "Foreign key referencing the products dimension."
        tests:
          - not_null
          - relationships:
              to: ref('dim_products')
              field: product_sk
      - name: customer_fk
        description: "Foreign key referencing the customers dimension."
        tests:
          - not_null
          - relationships:
              to: ref('dim_customers')
              field: customer_sk
      - name: shiptoadress_fk
        description: "Foreign key referencing the locations dimension for shipping address."
        tests:
          - not_null
          - relationships:
              to: ref('dim_locations')
              field: shiptoaddress_sk
      - name: creditcard_fk
        description: "Foreign key referencing the credit cards dimension."
        tests:
          - not_null
          - relationships:
              to: ref('dim_creditcards')
              field: creditcard_sk
      - name: unitprice
        description: "Unit price of the product in the sales order."
        tests:
          - not_null
      - name: orderqty
        description: "Quantity of the product ordered in the sales order."
        tests:
          - not_null
      - name: revenue_wo_taxandfreight
        description: "Total revenue of the sales order without taxes and freight."
        tests:
          - not_null
      - name: reason_name_final
        description: "Aggregated reasons for the sales order."
      - name: orderdate
        description: "Date of the sales order."
        tests:
          - not_null
      - name: order_status_name
        description: "Status of the sales order (e.g., 'Approved', 'In process', 'Shipped')."
        tests:
          - not_null
    depends_on:
      - model: dim_products
      - model: dim_customers
      - model: dim_locations
      - model: dim_creditcards
      - model: dim_regions
