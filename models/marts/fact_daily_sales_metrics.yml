version: 2

models:
  - name: daily_sales_metrics
    description: |
      This model calculates daily sales metrics such as total sales, average order value, average products per order, and conversion rate.
    columns:
      - name: orderdate
        description: The date of the order.
        tests:
          - not_null
      - name: num_orders
        description: The total number of orders for the day.
        tests:
          - not_null
      - name: total_sales
        description: The total sales amount for the day.
        tests:
          - not_null
      - name: avg_order_value
        description: The average order value for the day.
        tests:
          - not_null
      - name: avg_products_per_order
        description: The average number of products per order for the day.
        tests:
          - not_null
      - name: conversion_rate
        description: The conversion rate for the day.
        tests:
          - not_null
    materialized: table
    schema: aggregated_tables
    unique_key: [orderdate]
    sql: models/marts/fact_daily_sales_metrics.sql
